<%- include('partials/header.ejs') %>
<div class="container">
    <% if (message) { %>
        <p class="text-center text-danger"><%= message %></p>
    <% } %>
    <% if (fruit) { %>
        <form class="add-fruit-form" action="" method="post" enctype="multipart/form-data">
            <div class="form-row">
                <div class="form-group col-md-4">
                    <input type="text" class="form-control" name="fruitName" id="fruit-name" value="<%= fruit.name %>" placeholder="Fruit Name" required>
                </div>
                <div class="form-group col-md-4">
                    <select class="form-control" name="seasonStart" id="start-month" required>
                        <option value="" disabled>-- Start Season --</option>
                        <% ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'].forEach(month => { %>
                            <option value="<%= month %>" <%= fruit.season_start === month ? 'selected' : '' %>><%= month %></option>
                        <% }) %>
                    </select>
                </div>
                <div class="form-group col-md-4">
                    <select class="form-control" name="seasonEnd" id="end-month" required>
                        <option value="" disabled>-- End Season --</option>
                        <% ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'].forEach(month => { %>
                            <option value="<%= month %>" <%= fruit.season_end === month ? 'selected' : '' %>><%= month %></option>
                        <% }) %>
                    </select>
                </div>
                <div class="form-group col-md-4">
                    <select class="form-control" name="color" id="color" required>
                        <option disabled>-- Choose Color --</option>
                        <% colors.forEach((color) => { %>
                            <option value="<%= color.id %>" <%= fruit.color_id === color.id ? 'selected' : '' %>><%= color.color_name %></option>
                        <% }) %>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-3">
                    <input type="number" class="form-control" name="calories" id="calories" placeholder="Calories" value="<%= fruit.calories %>">
                </div>
                <div class="col-md-12">
                    <label for="fruit-img"><b>Fruit Image</b></label><br>
                    <input type="file" name="image" id="fruit-img" class="">
                    <% if (fruit.image) { %>
                        <p>Current image: <%= fruit.image %></p>
                    <% } %>
                </div>
            </div>
            <button type="submit" class="btn btn-success float-right">Update Fruit</button>
        </form>
    <% } else { %>
        <p class="text-center">Fruit Not Found. Go <a href="/add">here</a> to add fruits.</p>
    <% } %>
</div>
</div>
</body>
</html>